<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="Dropdown.css">
    <link rel="stylesheet" type="text/css" href="demonstration.css">
    <script type="text/javascript" src="Dropdown.js"></script>
</head>
<body>
    <ul class="dropdown">
        <li class="">
            <span>Menu</span>
            <ul>
                <li >
                    <span>IMDb</span>
                    <ul>
                        <li class="">
                            <span>Puntaje de IMDb</span>
                        </li>
                        <li class="">
                            <span>Premios</span>
                        </li>
                        <li class="">
                            <span>Ficha Director</span>
                        </li>
                    </ul>
                </li>
                <li class="">
                    <span>Mercado Libre</span>
                </li>
            </ul>
        </li>
    </ul>

    <ul>
        <li class="peli">
            Peli-1
        </li>
        <li class="peli">
            Peli-2
        </li>
    </ul>
</body>
<script type="text/javascript">
    decorators = {
        type: "movie",
        elements: 
        [
            {
                name: "IMDB",
                functions: [
                    {
                        description: "Puntaje de IMDb" ,
                        method : function() {alert("Puntaje")}
                    },
                    {
                        description: "Premios",
                        method : function () {alert("Premios")}
                    },
                    {
                        description: "Ficha de Director",
                        method : function () {alert("Ficha de Director")}
                    }
                ]
            },
            {
                name: "Mercado Libre",
                functions: [
                    {
                        description: "Buscar Precios",
                        method : function () {alert("Buscar Precios")}
                    }
                ]
            }
        ]
    };

    peliculas = document.getElementsByClassName("peli");

    GuiManager = {
        drawSubmenuItem: function(item){
            var listItem = document.createElement("li");

            var span = document.createElement("span");
            listItem.appendChild(span);
            span.appendChild(document.createTextNode(item.description));
            span.onclick = item.method;

            return listItem;
        },

        drawSubmenu: function(menuItem){
            var subMenuItem = document.createElement("li");

            var span = document.createElement("span");
            subMenuItem.appendChild(span);
            span.appendChild(document.createTextNode(menuItem.name));

            var listaMetodosDecoradores = document.createElement("ul");
            subMenuItem.appendChild(listaMetodosDecoradores);

            for (k = 0; k < menuItem.functions.length; k++ ){
                var nodoFuncion = this.drawSubmenuItem(menuItem.functions[k]);
                listaMetodosDecoradores.appendChild(nodoFuncion);
            }

            return subMenuItem;
        },

        drawMenu: function(submenuList){
            var contenedorUlMenu = document.createElement("ul");
            contenedorUlMenu.className = "dropdown";

            var contenedorLiMenu = document.createElement("li");
            contenedorUlMenu.appendChild(contenedorLiMenu);

            var spanMenu = document.createElement("span");
            contenedorLiMenu.appendChild(spanMenu);
            spanMenu.appendChild(document.createTextNode("Menu"));

            var listaDecoradores = document.createElement("ul");
            contenedorLiMenu.appendChild(listaDecoradores);

            for (j = 0; j < submenuList.elements.length; j++){
                var submenu = this.drawSubmenu(submenuList.elements[j]);
                listaDecoradores.appendChild(submenu);
            }

            return contenedorUlMenu;
        }
    }

    for (i = 0; i < peliculas.length; i++){
        var menu = GuiManager.drawMenu(decorators);
        peliculas[i].appendChild(menu);
    }



    // initialise the drop-down menus
    Dropdown.initialise();
</script>
</html>